<!DOCTYPE HTML>
<html lang="en-US" >
    
    <head>
        
        <meta charset="UTF-8">
        <title>day 08 | My iOS Book</title>
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <meta name="description" content="">
        <meta name="generator" content="GitBook 1.0.3">
        <meta name="HandheldFriendly" content="true"/>
        <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
        <meta name="apple-mobile-web-app-capable" content="yes">
        <meta name="apple-mobile-web-app-status-bar-style" content="black">
        <link rel="apple-touch-icon-precomposed" sizes="152x152" href="../gitbook/images/apple-touch-icon-precomposed-152.png">
        <link rel="shortcut icon" href="../gitbook/images/favicon.ico" type="image/x-icon">
        
    
    
    
    <link rel="next" href="../day_09/README.html" />
    
    
    <link rel="prev" href="../day_07/README.html" />
    

        
    </head>
    <body>
        
        
<link rel="stylesheet" href="../gitbook/style.css">


        
    <div class="book"  data-level="8" data-basepath=".." data-revision="1472869100799">
    

<div class="book-summary">
    <div class="book-search">
        <input type="text" placeholder="Type to search" class="form-control" />
    </div>
    <ul class="summary">
        
    	
    	
    	

        

        
    
        
        <li class="chapter " data-level="0" data-path="index.html">
            
                
                    <a href="../index.html">
                        <i class="fa fa-check"></i>
                        
                         Introduction
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="1" data-path="day_01/README.html">
            
                
                    <a href="../day_01/README.html">
                        <i class="fa fa-check"></i>
                        
                            <b>1.</b>
                        
                         day 01
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="2" data-path="day_02/README.html">
            
                
                    <a href="../day_02/README.html">
                        <i class="fa fa-check"></i>
                        
                            <b>2.</b>
                        
                         day 02
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="3" data-path="day_03/README.html">
            
                
                    <a href="../day_03/README.html">
                        <i class="fa fa-check"></i>
                        
                            <b>3.</b>
                        
                         day 03
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="4" data-path="day_04/README.html">
            
                
                    <a href="../day_04/README.html">
                        <i class="fa fa-check"></i>
                        
                            <b>4.</b>
                        
                         day 04
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="5" data-path="day_05/README.html">
            
                
                    <a href="../day_05/README.html">
                        <i class="fa fa-check"></i>
                        
                            <b>5.</b>
                        
                         day 05
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="6" data-path="day_06/README.html">
            
                
                    <a href="../day_06/README.html">
                        <i class="fa fa-check"></i>
                        
                            <b>6.</b>
                        
                         day 06
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="7" data-path="day_07/README.html">
            
                
                    <a href="../day_07/README.html">
                        <i class="fa fa-check"></i>
                        
                            <b>7.</b>
                        
                         day 07
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter active" data-level="8" data-path="day_08/README.html">
            
                
                    <a href="../day_08/README.html">
                        <i class="fa fa-check"></i>
                        
                            <b>8.</b>
                        
                         day 08
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="9" data-path="day_09/README.html">
            
                
                    <a href="../day_09/README.html">
                        <i class="fa fa-check"></i>
                        
                            <b>9.</b>
                        
                         day 09
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="10" data-path="day_10/README.html">
            
                
                    <a href="../day_10/README.html">
                        <i class="fa fa-check"></i>
                        
                            <b>10.</b>
                        
                         day 10
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="11" data-path="day_11/README.html">
            
                
                    <a href="../day_11/README.html">
                        <i class="fa fa-check"></i>
                        
                            <b>11.</b>
                        
                         day 11
                    </a>
                
            
            
        </li>
    


        
        <li class="divider"></li>
        <li>
            <a href="http://www.gitbook.io/" target="blank" class="gitbook-link">Published using GitBook</a>
        </li>
        
    </ul>
</div>

    <div class="book-body">
        <div class="body-inner">
            <div class="book-header">
    <!-- Actions Left -->
    <a href="#" class="btn pull-left toggle-summary" aria-label="Toggle summary"><i class="fa fa-align-justify"></i></a>
    <a href="#" class="btn pull-left toggle-search" aria-label="Toggle search"><i class="fa fa-search"></i></a>
    
    <div id="font-settings-wrapper" class="dropdown pull-left">
        <a href="#" class="btn toggle-dropdown" aria-label="Toggle font settings"><i class="fa fa-font"></i>
        </a>
        <div class="dropdown-menu font-settings">
    <div class="dropdown-caret">
        <span class="caret-outer"></span>
        <span class="caret-inner"></span>
    </div>

    <div class="buttons">
        <button type="button" id="reduce-font-size" class="button size-2">A</button>
        <button type="button" id="enlarge-font-size" class="button size-2">A</button>
    </div>

    <div class="buttons font-family-list">
        <button type="button" data-font="0" class="button">Serif</button>
        <button type="button" data-font="1" class="button">Sans</button>
    </div>

    <div class="buttons color-theme-list">
        <button type="button" id="color-theme-preview-0" class="button size-3" data-theme="0">White</button>
        <button type="button" id="color-theme-preview-1" class="button size-3" data-theme="1">Sepia</button>
        <button type="button" id="color-theme-preview-2" class="button size-3" data-theme="2">Night</button>
    </div>
</div>

    </div>

    <!-- Actions Right -->
    
    <div class="dropdown pull-right">
        <a href="#" class="btn toggle-dropdown" aria-label="Toggle share dropdown"><i class="fa fa-share-alt"></i>
        </a>
        <div class="dropdown-menu font-settings dropdown-left">
            <div class="dropdown-caret">
                <span class="caret-outer"></span>
                <span class="caret-inner"></span>
            </div>
            <div class="buttons">
                <button type="button" data-sharing="twitter" class="button">Twitter</button>
                <button type="button" data-sharing="google-plus" class="button">Google</button>
                <button type="button" data-sharing="facebook" class="button">Facebook</button>
                <button type="button" data-sharing="weibo" class="button">Weibo</button>
                <button type="button" data-sharing="instapaper" class="button">Instapaper</button>
            </div>
        </div>
    </div>
    

    
    <a href="#" target="_blank" class="btn pull-right google-plus-sharing-link sharing-link" data-sharing="google-plus" aria-label="Share on Google Plus"><i class="fa fa-google-plus"></i></a>
    
    
    <a href="#" target="_blank" class="btn pull-right facebook-sharing-link sharing-link" data-sharing="facebook" aria-label="Share on Facebook"><i class="fa fa-facebook"></i></a>
    
    
    <a href="#" target="_blank" class="btn pull-right twitter-sharing-link sharing-link" data-sharing="twitter" aria-label="Share on Twitter"><i class="fa fa-twitter"></i></a>
    
    

    <!-- Title -->
    <h1>
        <i class="fa fa-circle-o-notch fa-spin"></i>
        <a href="../" >My iOS Book</a>
    </h1>
</div>

            <div class="page-wrapper" tabindex="-1">
                <div class="page-inner">
                
                
                    <section class="normal" id="section-gitbook_13359">
                    
                        <h1 id="day-08">day 08</h1>
<h2 id="">简单购物车</h2>
<p><img src="images/wine.png" alt=""></p>
<h4 id="">关注点</h4>
<ul>
<li>storyboard自定义等高cell</li>
<li>简单MVC</li>
<li>代理设计模式</li>
<li>圆角按钮</li>
</ul>
<h4 id="">基本步骤</h4>
<ul>
<li>storyboard界面
<img src="images/story.png" alt=""></li>
<li>添加数据源<pre><code class="lang-objc"><span class="hljs-preprocessor">#pragma mark - 懒加载，模型解析</span>
- (<span class="hljs-built_in">NSArray</span> *)wines {
   <span class="hljs-keyword">if</span> (_wines == <span class="hljs-literal">nil</span>) {
       _wines = [SLWine mj_objectArrayWithFilename:<span class="hljs-string">@"wine.plist"</span>];
   }
   <span class="hljs-keyword">return</span> _wines;
}
<span class="hljs-preprocessor">#pragma mark - UITableView数据源方法</span>
- (<span class="hljs-built_in">NSInteger</span>)tableView:(<span class="hljs-built_in">UITableView</span> *)tableView numberOfRowsInSection:(<span class="hljs-built_in">NSInteger</span>)section
{
   <span class="hljs-keyword">return</span> <span class="hljs-keyword">self</span><span class="hljs-variable">.wines</span><span class="hljs-variable">.count</span>;
}
- (<span class="hljs-built_in">UITableViewCell</span> *)tableView:(<span class="hljs-built_in">UITableView</span> *)tableView cellForRowAtIndexPath:(<span class="hljs-built_in">NSIndexPath</span> *)indexPath
{
   SLWineTableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:<span class="hljs-string">@"wine"</span>];
   <span class="hljs-keyword">if</span> (!cell) {
       cell = [[SLWineTableViewCell alloc] init];
   }
   cell<span class="hljs-variable">.wine</span> = <span class="hljs-keyword">self</span><span class="hljs-variable">.wines</span>[indexPath<span class="hljs-variable">.row</span>];
   cell<span class="hljs-variable">.delegate</span> = <span class="hljs-keyword">self</span>;
   <span class="hljs-keyword">return</span> cell;
}
</code></pre>
</li>
<li><p>自定义cell</p>
<ul>
<li>新建<code>SLWineTableViewCell</code>类，设置storyboard的cell为但钱类，拖线拿到相应控件属性和事件<pre><code class="lang-objc"> <span class="hljs-class"><span class="hljs-keyword">@interface</span> <span class="hljs-title">SLWineTableViewCell</span> ()</span>
 <span class="hljs-comment">/** 图片标签 */</span>
 <span class="hljs-keyword">@property</span> (<span class="hljs-keyword">nonatomic</span>, <span class="hljs-keyword">weak</span>) <span class="hljs-keyword">IBOutlet</span> <span class="hljs-built_in">UIImageView</span>    *iconView;
 <span class="hljs-comment">/** 名字标签 */</span>
 <span class="hljs-keyword">@property</span> (<span class="hljs-keyword">nonatomic</span>, <span class="hljs-keyword">weak</span>) <span class="hljs-keyword">IBOutlet</span> <span class="hljs-built_in">UILabel</span> *nameLabel;
 <span class="hljs-comment">/** 价钱标签 */</span>
 <span class="hljs-keyword">@property</span> (<span class="hljs-keyword">nonatomic</span>, <span class="hljs-keyword">weak</span>) <span class="hljs-keyword">IBOutlet</span> <span class="hljs-built_in">UILabel</span>    *priceLabel;
 <span class="hljs-comment">/** 加一个按钮 */</span>
 <span class="hljs-keyword">@property</span> (<span class="hljs-keyword">nonatomic</span>, <span class="hljs-keyword">weak</span>) <span class="hljs-keyword">IBOutlet</span> SLCircleButton    *ad   dButton;
 <span class="hljs-comment">/** 减一个按钮 */</span>
 <span class="hljs-keyword">@property</span> (<span class="hljs-keyword">nonatomic</span>, <span class="hljs-keyword">weak</span>) <span class="hljs-keyword">IBOutlet</span> SLCircleButton    *removeButton;
 <span class="hljs-comment">/** 数量标签 */</span>
 <span class="hljs-keyword">@property</span> (<span class="hljs-keyword">nonatomic</span>, <span class="hljs-keyword">weak</span>) <span class="hljs-keyword">IBOutlet</span> <span class="hljs-built_in">UILabel</span> *numLabel;
 <span class="hljs-keyword">@end</span>
 <span class="hljs-class"><span class="hljs-keyword">@implementation</span> <span class="hljs-title">SLWineTableViewCell</span></span>
 - (<span class="hljs-keyword">IBAction</span>)addButton:(<span class="hljs-built_in">UIButton</span> *)button {
      <span class="hljs-keyword">self</span><span class="hljs-variable">.wine</span><span class="hljs-variable">.count</span> += <span class="hljs-number">1</span>;
      <span class="hljs-keyword">self</span><span class="hljs-variable">.removeButton</span><span class="hljs-variable">.enabled</span> = <span class="hljs-literal">YES</span>;
      <span class="hljs-keyword">self</span><span class="hljs-variable">.numLabel</span><span class="hljs-variable">.text</span> = [<span class="hljs-built_in">NSString</span> stringWithFormat:<span class="hljs-string">@"%d"</span>, <span class="hljs-keyword">self</span><span class="hljs-variable">.wine</span><span class="hljs-variable">.count</span>];
      <span class="hljs-keyword">if</span> ([<span class="hljs-keyword">self</span><span class="hljs-variable">.delegate</span> respondsToSelector:<span class="hljs-keyword">@selector</span>(wineTableViewCell: addbuttonClick:)]) {
          [<span class="hljs-keyword">self</span><span class="hljs-variable">.delegate</span> wineTableViewCell:<span class="hljs-keyword">self</span> addbuttonClick:button];
     }
 }
 - (<span class="hljs-keyword">IBAction</span>)removeButton:(<span class="hljs-built_in">UIButton</span> *)button {
      <span class="hljs-keyword">self</span><span class="hljs-variable">.wine</span><span class="hljs-variable">.count</span> -= <span class="hljs-number">1</span>;
      <span class="hljs-keyword">self</span><span class="hljs-variable">.numLabel</span><span class="hljs-variable">.text</span> = [<span class="hljs-built_in">NSString</span> stringWithFormat:<span class="hljs-string">@"%d"</span>, <span class="hljs-keyword">self</span><span class="hljs-variable">.wine</span><span class="hljs-variable">.count</span>];
      <span class="hljs-keyword">if</span> (<span class="hljs-keyword">self</span><span class="hljs-variable">.wine</span><span class="hljs-variable">.count</span> == <span class="hljs-number">0</span>) {
          button<span class="hljs-variable">.enabled</span> = <span class="hljs-literal">NO</span>;
      }
      <span class="hljs-keyword">if</span> ([<span class="hljs-keyword">self</span><span class="hljs-variable">.delegate</span> respondsToSelector:<span class="hljs-keyword">@selector</span>(wineTableViewCell: removebuttonClick:)]) {
          [<span class="hljs-keyword">self</span><span class="hljs-variable">.delegate</span> wineTableViewCell:<span class="hljs-keyword">self</span> removebuttonClick:button];
      }
 }
 - (<span class="hljs-keyword">void</span>)setWine:(SLWine *)wine {
      _wine = wine;
      <span class="hljs-keyword">self</span><span class="hljs-variable">.iconView</span><span class="hljs-variable">.image</span> = [<span class="hljs-built_in">UIImage</span> imageNamed:wine<span class="hljs-variable">.image</span>];
      <span class="hljs-keyword">self</span><span class="hljs-variable">.nameLabel</span><span class="hljs-variable">.text</span> = wine<span class="hljs-variable">.name</span>;
      <span class="hljs-keyword">self</span><span class="hljs-variable">.priceLabel</span><span class="hljs-variable">.text</span> = [<span class="hljs-built_in">NSString</span> stringWithFormat:<span class="hljs-string">@"¥%@"</span>, wine<span class="hljs-variable">.money</span>];    
      <span class="hljs-keyword">self</span><span class="hljs-variable">.numLabel</span><span class="hljs-variable">.text</span> = [<span class="hljs-built_in">NSString</span> stringWithFormat:<span class="hljs-string">@"%d"</span>, <span class="hljs-keyword">self</span><span class="hljs-variable">.wine</span><span class="hljs-variable">.count</span>];
      <span class="hljs-keyword">if</span> (<span class="hljs-keyword">self</span><span class="hljs-variable">.wine</span><span class="hljs-variable">.count</span> == <span class="hljs-number">0</span>) {
          <span class="hljs-keyword">self</span><span class="hljs-variable">.removeButton</span><span class="hljs-variable">.enabled</span> = <span class="hljs-literal">NO</span>;
      }
 }
 <span class="hljs-keyword">@end</span>
</code></pre>
</li>
<li><p>cell的代理</p>
<pre><code class="lang-objc"><span class="hljs-preprocessor">#import <span class="hljs-title">&lt;UIKit/UIKit.h&gt;</span></span>
<span class="hljs-class"><span class="hljs-keyword">@class</span> <span class="hljs-title">SLWine</span>, <span class="hljs-title">SLWineTableViewCell</span>;</span>
<span class="hljs-class"><span class="hljs-keyword">@protocol</span> <span class="hljs-title">SLWineTableViewCelldelegate</span> &lt;<span class="hljs-title">NSObject</span>&gt;</span>
<span class="hljs-keyword">@optional</span>
- (<span class="hljs-keyword">void</span>)wineTableViewCell:(SLWineTableViewCell *)cell addbuttonClick:(<span class="hljs-built_in">UIButton</span> *)button;
- (<span class="hljs-keyword">void</span>)wineTableViewCell:(SLWineTableViewCell *)cell removebuttonClick:(<span class="hljs-built_in">UIButton</span> *)button;
<span class="hljs-keyword">@end</span>

<span class="hljs-class"><span class="hljs-keyword">@interface</span> <span class="hljs-title">SLWineTableViewCell</span> : <span class="hljs-title">UITableViewCell</span></span>
<span class="hljs-comment">/** 酒模型 */</span>
<span class="hljs-keyword">@property</span> (<span class="hljs-keyword">nonatomic</span>, <span class="hljs-keyword">strong</span>) SLWine *wine;
<span class="hljs-comment">/** Cell的代理 */</span>
<span class="hljs-keyword">@property</span> (<span class="hljs-keyword">nonatomic</span>, <span class="hljs-keyword">weak</span>) <span class="hljs-keyword">id</span>&lt;SLWineTableViewCelldelegate&gt; delegate;
<span class="hljs-keyword">@end</span>
</code></pre>
</li>
</ul>
</li>
<li>圆角按钮<ul>
<li>自定义按钮<code>SLCircleButton</code></li>
<li>头文件<code>SLCircleButton.h</code><pre><code class="lang-objc"><span class="hljs-preprocessor">#import <span class="hljs-title">&lt;UIKit/UIKit.h&gt;</span></span>
<span class="hljs-class"><span class="hljs-keyword">@interface</span> <span class="hljs-title">SLCircleButton</span> : <span class="hljs-title">UIButton</span></span>
<span class="hljs-keyword">@end</span>
</code></pre>
</li>
<li>实现<code>SLCircleButton.m</code><pre><code class="lang-objc"><span class="hljs-preprocessor">#import <span class="hljs-title">"SLCircleButton.h"</span></span>
<span class="hljs-class"><span class="hljs-keyword">@implementation</span> <span class="hljs-title">SLCircleButton</span></span>
- (<span class="hljs-keyword">void</span>)awakeFromNib
{
  <span class="hljs-comment">// 设置边框宽度</span>
 <span class="hljs-keyword">self</span><span class="hljs-variable">.layer</span><span class="hljs-variable">.borderWidth</span> = <span class="hljs-number">1.0</span>;
 <span class="hljs-comment">// 设置边框颜色</span>
 <span class="hljs-keyword">self</span><span class="hljs-variable">.layer</span><span class="hljs-variable">.borderColor</span> = [<span class="hljs-built_in">UIColor</span> redColor]<span class="hljs-variable">.CGColor</span>;
 <span class="hljs-comment">// 设置圆角半径</span>
 <span class="hljs-keyword">self</span><span class="hljs-variable">.layer</span><span class="hljs-variable">.cornerRadius</span> = <span class="hljs-keyword">self</span><span class="hljs-variable">.frame</span><span class="hljs-variable">.size</span><span class="hljs-variable">.width</span> * <span class="hljs-number">0.5</span>;
}
<span class="hljs-keyword">@end</span>
</code></pre>
</li>
</ul>
</li>
</ul>
<h4 id="ios">iOS通知机制</h4>
<ul>
<li>要点<ul>
<li>通知的发布</li>
<li>通知的监听</li>
<li>通知的移除</li>
</ul>
</li>
<li>通知中心<ul>
<li>每一个应用程序都有一个通知中心<code>NSNotificationCenter</code>实例，专门负责协助不同对象之间的消息通信</li>
<li>任何一个对象都可以向通知中心发布通知<code>NSNotification</code>，描述自己在做什么</li>
<li>其他感兴趣的对象<code>Observer</code>可以申请在某个特定通知发布时(或在某个特定的对象发布通知时)收到这个通知</li>
</ul>
</li>
<li>通知简介<ul>
<li>三个属性<pre><code class="lang-objc">- (<span class="hljs-built_in">NSString</span> *)name; <span class="hljs-comment">// 通知的名称</span>
- (<span class="hljs-keyword">id</span>)object; <span class="hljs-comment">// 通知发布者(是谁要发布通知)</span>
- (<span class="hljs-built_in">NSDictionary</span> *)userInfo; <span class="hljs-comment">// 一些额外的信息(通知发布者传递给通知接收者的信息内容)</span>
</code></pre>
</li>
<li>初始化<pre><code class="lang-objc">+ (instancetype)notificationWithName:(<span class="hljs-built_in">NSString</span> *)aName object:(<span class="hljs-keyword">id</span>)anObject;
+ (instancetype)notificationWithName:(<span class="hljs-built_in">NSString</span> *)aName object:(<span class="hljs-keyword">id</span>)anObject userInfo:(<span class="hljs-built_in">NSDictionary</span> *)aUserInfo;
- (instancetype)initWithName:(<span class="hljs-built_in">NSString</span> *)name object:(<span class="hljs-keyword">id</span>)object userInfo:(<span class="hljs-built_in">NSDictionary</span> *)userInfo;
</code></pre>
</li>
</ul>
</li>
<li>通知发布<ul>
<li>通知中心<code>NSNotificationCenter</code>提供了相应的方法来帮助发布通知<pre><code class="lang-objc"><span class="hljs-comment">// 发布一个notification通知，可在notification对象中设置通知的名称、通知发布者、额外信息等</span>
- (<span class="hljs-keyword">void</span>)postNotification:(<span class="hljs-built_in">NSNotification</span> *)notification;
<span class="hljs-comment">// 发布一个名称为aName的通知，anObject为这个通知的发布者</span>
- (<span class="hljs-keyword">void</span>)postNotificationName:(<span class="hljs-built_in">NSString</span> *)aName object:(<span class="hljs-keyword">id</span>)anObject;
<span class="hljs-comment">// 发布一个名称为aName的通知，anObject为这个通知的发布者，aUserInfo为额外信息</span>
- (<span class="hljs-keyword">void</span>)postNotificationName:(<span class="hljs-built_in">NSString</span> *)aName object:(<span class="hljs-keyword">id</span>)anObject userInfo:(<span class="hljs-built_in">NSDictionary</span> *)aUserInfo;
</code></pre>
</li>
</ul>
</li>
<li>通知监听<ul>
<li>注册监听器，通知中心<code>NSNotificationCenter</code>提供了方法来注册一个监听通知的监听器<code>Observer</code><pre><code class="lang-objc"><span class="hljs-comment">/**
 *  observer：监听器，即谁要接收这个通知
 *  aSelector：收到通知后，回调监听器的这个方法，并且把通知对象当做参数传入
 *  aName：通知的名称。如果为nil，那么无论通知的名称是什么，监听器都能收到这个通知
 *  anObject：通知发布者。如果为anObject和aName都为nil，监听器都收到所有的通知
 */</span>
 - (<span class="hljs-keyword">void</span>)addObserver:(<span class="hljs-keyword">id</span>)observer selector:(SEL)aSelector name:(<span class="hljs-built_in">NSString</span> *)aName object:(<span class="hljs-keyword">id</span>)anObject;
 <span class="hljs-comment">/**
  *  name：通知的名称
  *  obj：通知发布者
  *  block：收到对应的通知时，会回调这个block
  *  queue：决定了block在哪个操作队列中执行，如果传nil，默认在当前操作队列中同步执行
  */</span>
 - (<span class="hljs-keyword">id</span>)addObserverForName:(<span class="hljs-built_in">NSString</span> *)name object:(<span class="hljs-keyword">id</span>)obj queue:(NSOperationQueue *)queue usingBlock:(<span class="hljs-keyword">void</span> (^)(<span class="hljs-built_in">NSNotification</span> *note))block;
</code></pre>
</li>
<li>移除监听<pre><code class="lang-objc">- (<span class="hljs-keyword">void</span>)removeObserver:(<span class="hljs-keyword">id</span>)observer;
- (<span class="hljs-keyword">void</span>)removeObserver:(<span class="hljs-keyword">id</span>)observer name:(<span class="hljs-built_in">NSString</span> *)aName object:(<span class="hljs-keyword">id</span>)anObject;
</code></pre>
</li>
</ul>
</li>
<li>UIDecive的通知<ul>
<li>UIDevice类提供了一个单粒对象，它代表着设备，通过它可以获得一些设备相关的信息<ul>
<li>电池电量值(batteryLevel)</li>
<li>电池状态(batteryState)</li>
<li>设备的类型(model，比如iPod、iPhone等)</li>
<li>设备的系统(systemVersion)</li>
</ul>
</li>
<li>通过<code>[UIDevice currentDevice]</code>可以获取这个单粒对象</li>
<li>UIDevice对象会不间断地发布一些通知<pre><code> UIDeviceOrientationDidChangeNotification    // 设备旋转
 UIDeviceBatteryStateDidChangeNotification   // 电池状态改变
 UIDeviceBatteryLevelDidChangeNotification   // 电池电量改变
 UIDeviceProximityStateDidChangeNotification // 近距离传感器(比如设备贴近了使用者的脸部)
</code></pre></li>
</ul>
</li>
<li>键盘的通知<ul>
<li>我们经常需要在键盘弹出或者隐藏的时候做一些特定的操作,因此需要监听键盘的状态</li>
<li>键盘状态改变的时候,系统会发出一些特定的通知<pre><code> UIKeyboardWillShowNotification         // 键盘即将显示
 UIKeyboardDidShowNotification          // 键盘显示完毕
 UIKeyboardWillHideNotification         // 键盘即将隐藏
 UIKeyboardDidHideNotification          // 键盘隐藏完毕
 UIKeyboardWillChangeFrameNotification  // 键盘的位置尺寸即将发生改变
 UIKeyboardDidChangeFrameNotification   // 键盘的位置尺寸改变完毕
</code></pre></li>
<li>系统发出键盘通知时,会附带一下跟键盘有关的额外信息(字典),字典常见的key如下:<pre><code> UIKeyboardFrameBeginUserInfoKey         // 键盘刚开始的frame
 UIKeyboardFrameEndUserInfoKey           // 键盘最终的frame(动画执行完毕后)
 UIKeyboardAnimationDurationUserInfoKey  // 键盘动画的时间
 UIKeyboardAnimationCurveUserInfoKey     // 键盘动画的执行节奏(快慢)
</code></pre></li>
</ul>
</li>
<li>通知和代理<ul>
<li>共同点<br/>
利用通知和代理都能完成对象之间的通信<br/>
(比如A对象告诉D对象发生了什么事情, A对象传递数据给D对象)</li>
<li>区别<ul>
<li>代理 : 1个对象只能告诉另1个对象发生了什么事情</li>
<li>通知 : 1个对象能告诉N个对象发生了什么事情, 1个对象能得知N个对象发生了什么事情</li>
</ul>
</li>
</ul>
</li>
</ul>

                    
                    </section>
                
                
                </div>
            </div>
        </div>

        
        <a href="../day_07/README.html" class="navigation navigation-prev " aria-label="Previous page: day 07"><i class="fa fa-angle-left"></i></a>
        
        
        <a href="../day_09/README.html" class="navigation navigation-next " aria-label="Next page: day 09"><i class="fa fa-angle-right"></i></a>
        
    </div>
</div>

        
<script src="../gitbook/app.js"></script>

    
    <script src="https://cdn.mathjax.org/mathjax/2.4-latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    

    
    <script src="../gitbook/plugins/gitbook-plugin-mathjax/plugin.js"></script>
    

<script>
require(["gitbook"], function(gitbook) {
    var config = {"fontSettings":{"theme":null,"family":"sans","size":2}};
    gitbook.start(config);
});
</script>

        
    </body>
    
</html>
